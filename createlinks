#!/usr/bin/perl -w

use strict;
use esmith::Build::CreateLinks qw(:all);


my @templates = qw(
    /etc/postfix/main.cf
    /etc/postfix/master.cf
    /etc/postfix/sasl_passwd
    /etc/postfix/tls_policy
);

#
# UPDATE event
#

event_templates('nethserver-mail-common-update', @templates);

event_actions('nethserver-mail-common-update',
	      'initialize-default-databases' => '00',
	      'nethserver-mail-common-conf' => '20',
	      'nethserver-mail-postmap-update' => '30',
	      'firewall-adjust' => '30',
	      'runlevel-adjust' => '40');

event_services('nethserver-mail-common-update',
	       'postfix' => 'restart');



#
# SAVE event
#

event_templates('nethserver-mail-common-save', @templates);

event_actions('nethserver-mail-common-save',
	      'nethserver-mail-postmap-update' => '20');

event_services('nethserver-mail-common-save',
	       'postfix' => 'reload');
